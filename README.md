# manage temperature by usb-fan


# create fan-man.sh

[fan-man.sh](https://github.com/cjsongcom/rasp.script/blob/manage.temperature.usb-fan/fan-man.sh)

<pre>
  <code>
    $ su - pi
    $ vim fan-man.sh
      ... code of fan-man.sh  ..
    $ chmod +x ./fan-man.sh
  </code>
</pre>


# setting crontab
<pre>
<code>  
  
$ crontab -e
# excute every 5 minute
# > 55: turn on fan at temperature  
# > 40: turn off fan at temperature
# > >/dev/null : disable cron emails (cat /var/email/pi), except error
*/5 * * * * /home/pi/fan-man.sh  55  40  >/dev/null 

</code>
</pre>


# see log
<pre>
  <code>
    $ su - pi
    $ tail -f fan-oper.log
  </code>  
</pre>

# log (~/fan-oper.log)
<details open>
  <summary>~/fan-oper.log</summary>
  <pre>
    <code>
[231012 15:35:01][DO_NOTHING] CUR_TEMP=53, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:36:02][DO_NOTHING] CUR_TEMP=53, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:37:02][DO_NOTHING] CUR_TEMP=52, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:38:01][DO_NOTHING] CUR_TEMP=53, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:39:02][DO_NOTHING] CUR_TEMP=53, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:40:01][DO_NOTHING] CUR_TEMP=53, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:41:02][DO_NOTHING] CUR_TEMP=53, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:42:01][DO_NOTHING] CUR_TEMP=53, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:43:02][DO_NOTHING] CUR_TEMP=53, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:44:01][DO_NOTHING] CUR_TEMP=53, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:45:02][DO_NOTHING] CUR_TEMP=53, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:46:01][DO_NOTHING] CUR_TEMP=54, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:47:02][DO_NOTHING] CUR_TEMP=53, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:48:02][DO_NOTHING] CUR_TEMP=53, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:49:01][DO_NOTHING] CUR_TEMP=54, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:50:02][DO_NOTHING] CUR_TEMP=54, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:51:01][DO_NOTHING] CUR_TEMP=54, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:52:02][DO_NOTHING] CUR_TEMP=54, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:53:01][DO_NOTHING] CUR_TEMP=54, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:54:02][DO_NOTHING] CUR_TEMP=54, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:55:01][DO_NOTHING] CUR_TEMP=54, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:56:02][DO_NOTHING] CUR_TEMP=54, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:57:01][DO_NOTHING] CUR_TEMP=54, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:58:03][FAN_ON] CUR_TEMP=55, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 15:59:01][DO_NOTHING] CUR_TEMP=51, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:00:02][DO_NOTHING] CUR_TEMP=48, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:01:01][DO_NOTHING] CUR_TEMP=47, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:02:02][DO_NOTHING] CUR_TEMP=46, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:03:01][DO_NOTHING] CUR_TEMP=45, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:04:02][DO_NOTHING] CUR_TEMP=44, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:05:01][DO_NOTHING] CUR_TEMP=44, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:06:02][DO_NOTHING] CUR_TEMP=43, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:07:02][DO_NOTHING] CUR_TEMP=42, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:08:01][DO_NOTHING] CUR_TEMP=43, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:09:02][DO_NOTHING] CUR_TEMP=42, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:10:01][DO_NOTHING] CUR_TEMP=42, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:11:02][DO_NOTHING] CUR_TEMP=41, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:12:01][DO_NOTHING] CUR_TEMP=41, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:13:02][DO_NOTHING] CUR_TEMP=41, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:14:01][DO_NOTHING] CUR_TEMP=41, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:15:02][DO_NOTHING] CUR_TEMP=41, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:16:01][DO_NOTHING] CUR_TEMP=41, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:17:02][DO_NOTHING] CUR_TEMP=41, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:18:01][DO_NOTHING] CUR_TEMP=41, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:19:02][DO_NOTHING] CUR_TEMP=41, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:20:02][FAN_OFF] CUR_TEMP=40, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:21:02][DO_NOTHING] CUR_TEMP=43, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:22:01][DO_NOTHING] CUR_TEMP=44, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:23:02][DO_NOTHING] CUR_TEMP=45, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:24:01][DO_NOTHING] CUR_TEMP=46, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:25:02][DO_NOTHING] CUR_TEMP=46, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:26:01][DO_NOTHING] CUR_TEMP=47, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:27:02][DO_NOTHING] CUR_TEMP=47, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:28:02][DO_NOTHING] CUR_TEMP=48, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:29:01][DO_NOTHING] CUR_TEMP=49, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:30:02][DO_NOTHING] CUR_TEMP=49, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:31:01][DO_NOTHING] CUR_TEMP=49, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:32:02][DO_NOTHING] CUR_TEMP=49, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:33:01][DO_NOTHING] CUR_TEMP=50, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:34:02][DO_NOTHING] CUR_TEMP=50, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:35:01][DO_NOTHING] CUR_TEMP=51, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 16:36:02][DO_NOTHING] CUR_TEMP=51, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 17:05:01][DO_NOTHING] CUR_TEMP=54, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 17:10:02][DO_NOTHING] CUR_TEMP=54, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 17:15:02][FAN_ON] CUR_TEMP=55, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 17:20:02][DO_NOTHING] CUR_TEMP=45, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 17:25:01][DO_NOTHING] CUR_TEMP=42, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 17:30:02][DO_NOTHING] CUR_TEMP=41, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 17:35:01][DO_NOTHING] CUR_TEMP=41, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 17:40:02][FAN_OFF] CUR_TEMP=40, CUR_USB_HUB_PWR_ST=1, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 17:45:02][DO_NOTHING] CUR_TEMP=46, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 17:50:02][DO_NOTHING] CUR_TEMP=47, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 17:55:01][DO_NOTHING] CUR_TEMP=49, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 18:00:02][DO_NOTHING] CUR_TEMP=51, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
[231012 18:05:01][DO_NOTHING] CUR_TEMP=51, CUR_USB_HUB_PWR_ST=0, TEMP_FAN_ON=55, TEMP_FAN_OFF=40
    </code>
  </pre>
    </details>
